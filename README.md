# Виджет банковских операций клиента

## Описание:

Виджет банковских операций клиента - это виджет, который показывает несколько последних успешных банковских операций клиента.

## Состав:

**Модуль masks**
1. Функция get_mask_card_number принимает на вход номер карты и возвращает ее маску. Номер карты замаскирован 
и отображается в формате XXXX XX** **** XXXX, где X — это цифра номера.

2. Функция get_mask_account принимает на вход номер счета и возвращает его маску. Номер счета замаскирован 
и отображается в формате **XXXX, где X — это цифра номера.

**Модуль widget** 
1. Функция mask_account_card принимает на вход строку, содержащую тип и номер карты или счета. 
Возвращает строку с замаскированным номером. Для карт и счетов используются разные типы маскировки.

2. Функция get_date принимает на вход строку с датой в формате "2024-03-11T02:26:18.671407".
Возвращает строку с датой в формате "ДД.ММ.ГГГГ" ("11.03.2024").

**Модуль processing**  
1. Функция filter_by_state принимает на вход список словарей и опционально значение для ключа state (по умолчанию 'EXECUTED').
Возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению.

2. Функция sort_by_date принимает на вход список словарей и необязательный параметр, задающий порядок сортировки (по умолчанию — убывание).
Возвращает новый список, отсортированный по дате (date).

**Модуль generators**
1. Функция filter_by_currency принимает на вход список словарей и ключ валюты.
Возвращает итератор словарей с указанным ключом.

2. Функция transaction_descriptions принимает на вход список словарей.
Возвращает итератор описаний транзакций.

3. Функция card_number_generator принимает на вход начальное и конечное значения для генерации.
Возвращает номера карт в заданном диапазоне.

**Модуль decorators**
1. Декоратор log для логирования выполнения функций в указанный файл или консоль.

**Модуль utils**
1. Функция get_operations_data для обработки JSON-файла и преобразования в список транзакций.

**Модуль external_api**
1. Функция get_transaction_amount для получения данных о транзакции и возврата суммы в рублях.
2. Функция convert_amount для перевода суммы из валюты в рубли через API

**Модуль loggers**
1. Функция create_logger для логирования. Добавлено сохранение логов в файл для модулей 
masks, utils. Логи сохранены в директории logs в корне проекта.

**Модуль reading_files**
1. Функция read_transactions_from_csv читает финансовые операции из CSV-файла
    и возвращает список словарей с транзакциями.
2. Функция read_transactions_from_excel читает финансовые операции из Excel-файла
    и возвращает список словарей с транзакциями.

## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/ronnnnie85/bank_witget.git
```
2. Установите зависимости:
```
poetry install
```

## Тестирование
В проекте используется модульное тестирование для проверки корректности работы всех компонентов. 
Тесты написаны с использованием библиотеки pytest.

## Запуск тестов
Чтобы запустить тесты, выполните следующую команду в корневой директории проекта:
```
pytest
```

## Cтруктура тестов
Тесты находятся в директории tests/. Каждый модуль тестируется отдельным файлом:
*tests/test_masks.py
*tests/test_processing.py
*tests/test_widget.py
*tests/test_generators.py
*tests/test_decorators.py
*tests/test_external_api.py
*tests/test_utils.py
*tests/test_loggers.py
*tests/test_reading_files.py

## Покрытие кода
Для оценки покрытия кода тестами используется библиотека coverage. Чтобы проверить покрытие, выполните:
```
pytest --cov=your_package_name
```

## Результаты тестирования
Все тесты успешно проходят.

Покрытие кода составляет 100%.

## Лицензия:

Этот проект лицензирован по [лицензии MIT](LICENSE).